{% extends "parent.html" %}

{% block content %}
<div class="row">
  <div class="col">
    <div style="text-align: right" id="map"></div>
  </div>
  <div class="col">
    {% if logged_in %}
    <form action = "/change_wl">
      <div class="form-group">
        <input type="hidden" name="city" value="{{city}}">
        <input type="hidden" name="state" value="{{state}}">
        <input type="hidden" name="county" value="{{county}}">
	    <input type="hidden" name="lat" value={{lat}}>
	    <input type="hidden" name="long" value={{long}}>
        <input type="hidden" name="page" value="info">
        {% if not on_watchlist %}
        <button type="submit" class="btn btn-outline-secondary btn-sm" name = "update" value = "Add to watchlist">Add to Watchlist</button>
        {% else %}
        <button type="submit" class="btn btn-outline-secondary btn-sm" name = "update" value = "Remove from watchlist">Remove from Watchlist</button>
        {% endif %}
      </div>
    </form>
    {% endif %}
    <div style="text-align:center">
    {% for each in weather_data["conditions"] %}
    <br>
    <img src="http://openweathermap.org/img/w/{{each['icon']}}.png" width="100px" height="100px">
    <span>{{each["description"]}}</span>
    <br>
    {% endfor %}
    <h5>Current Temp: {{weather_data["curr_temp"]}} &deg;F</h5>
    <h5>Daily Lowest: {{weather_data["low_temp"]}} &deg;F</h5>
    <h5>Daily Highest: {{weather_data["high_temp"]}} &deg;F</h5>
    <h5>Humidity: {{weather_data["humidity"]}}%</h5>
    <h5>Wind Speed: {{weather_data["wdsp"]}} mph</h5>
    </div>
  </div>
</div>
<div class="row" id="graph_container">
    <svg class="mx-3" id="t_graph"></svg>
    <svg class="mx-3" id="p_graph"></svg>
</div>

<script> var latitude = {{lat}};
  var longitude = {{long}};
  var loc = "{{city}}";
  var data = {{tavg_data | safe}};
  var p_data = {{prcp_data | safe}};
</script>

<script src="../static/map.js"></script>
<script src="http://d3js.org/d3.v5.min.js"></script>
<script src="../static/charts.js"></script>
{% endblock %}
