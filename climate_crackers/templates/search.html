{% extends "parent.html" %}

{% block content %}
<div class="table-responsive">
  <table class="table table-hover text-center" width="100%">
    <thead>
      <tr class="text-white" style="background-color: #8192d9;">
        <th>City</th>
	<th>County</th>
	<th>State</th>
	<th>Country</th>
	<th></th>
	<th></th>
      </tr>
    </thead>
    <tbody>
      {% for place in result %}
      <tr class="result_item">
	{% for i in range(4) %}
	{% if place[i] != "" %}
        <td>{{place[i]}}</td>
	{% endif %}
	{% endfor %}
        <td>
          <form action="/info" class="view_form">
	    <input type="hidden" name="city" value="{{place[0]}}">
	    <input type="hidden" name="lat" value={{place[4]}}>
	    <input type="hidden" name="long" value={{place[5]}}>
	    <input type="submit" class="btn btn-outline-secondary btn-sm" value="view">
	  </form>
        </td>
		<td>add to watchlist button</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  var lists = document.getElementsByClassName("result_item");
  var forms = document.getElementsByClassName("view_form");
  for (var i = 0; i<lists.length; i++) {
				  // console.log(lists[i]);
				  // console.log(forms[i]);
				  var city = lists[i].firstElementChild.innerHTML;
				  city = city.split(":")[1]
				  // console.log(city);
				  var hid = document.createElement("input")
				  hid.setAttribute("type","hidden");
				  hid.setAttribute("name","city");
				  hid.setAttribute("value",city.substring(1));
				  forms[i].append(hid);
				  }
				  </script>

{% endblock %}
